<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper
	namespace="com.ysh.test_project.repository.TestRepository">

	<select id="getTestData"
		resultType="com.ysh.test_project.dto.TestDTO">
		select * from test1;
	</select>

	<insert id="insertTest" parameterType="map">
		<if test="_databaseId == 'mysql' or _databaseId == 'mariadb'">
			insert into ${LogTableName}
			(test_name, test_email, test_date)
			values
			<foreach collection="batchList" item="item" separator=",">
				(
				#{item.test_name}, #{item.test_email}, #{item.test_date}
				)
			</foreach>
		</if>
		<if test="_databaseId == 'oracle'">
			insert into ${LogTableName}
			(id, test_name, test_email, test_date)
			<foreach collection="batchList" item="item" index="index"
				open="select " separator=" union all select " close="">
				#{item.id} as id,
				#{item.test_name} as test_name,
				#{item.test_email} as test_email,
				#{item.test_date} as test_date
				from dual
			</foreach>
		</if>
		<!-- 
		<if test="_databaseId == 'oracle'">
    insert into ${LogTableName} 
    (test_name, test_email, test_date)
    <foreach collection="batchList" item="item" index="index" open="select " separator=" union all select " close="">
        #{item.test_name} as test_name, 
        #{item.test_email} as test_email, 
        #{item.test_date} as test_date 
        from dual
    </foreach>
</if>
		
		 -->

	</insert>







</mapper>